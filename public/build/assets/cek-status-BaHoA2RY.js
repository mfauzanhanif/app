import{u as L,e as S,j as e}from"./client-DWlEoVOe.js";import{c as C}from"./compiler-runtime-D9Fr3M0Q.js";import{P}from"./psb-layout-yf56R0hM.js";import{S as I,f as M,a as B}from"./index-BF2Snjyi.js";function F(r){const s=C.c(21),{candidates:l,searched:i,filters:n}=r,{flash:a}=L().props,d=n?.registration_number??"",j=n?.nik??"";let c;s[0]!==d||s[1]!==j?(c={registration_number:d,nik:j},s[0]=d,s[1]=j,s[2]=c):c=s[2];const{data:u,setData:h,post:N,processing:g,errors:o,reset:y}=S(c);let p;s[3]!==N?(p=t=>{t.preventDefault(),N("/status")},s[3]=N,s[4]=p):p=s[4];const v=p;let f;s[5]!==y?(f=()=>{y(),window.location.href="/status"},s[5]=y,s[6]=f):f=s[6];const k=f;let m;s[7]!==a?(m=a?.success&&e.jsx("div",{className:"mb-6 rounded-lg border border-emerald-200 bg-emerald-50 p-4 text-emerald-800",children:e.jsx("p",{className:"text-sm font-medium",children:a.success})}),s[7]=a,s[8]=m):m=s[8];let x;s[9]!==l||s[10]!==u||s[11]!==o||s[12]!==k||s[13]!==v||s[14]!==g||s[15]!==i||s[16]!==h?(x=!i||l.length===0?e.jsxs("div",{className:"mx-auto max-w-md overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-xl",children:[e.jsxs("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 p-6 text-center",children:[e.jsx("div",{className:"mx-auto mb-3 flex h-16 w-16 items-center justify-center rounded-full bg-white/20",children:e.jsx("svg",{className:"h-8 w-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),e.jsx("h2",{className:"text-xl font-bold text-white md:text-2xl",children:"Cek Status Pendaftaran"}),e.jsx("p",{className:"mt-2 text-sm text-emerald-100 md:text-base",children:"Masukkan nomor pendaftaran dan NIK untuk melihat status."})]}),e.jsx("div",{className:"p-6 md:p-8",children:e.jsxs("form",{onSubmit:v,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"registration_number",className:"mb-1.5 block text-sm font-semibold text-gray-700",children:"Nomor Pendaftaran"}),e.jsx("input",{id:"registration_number",type:"text",placeholder:"contoh: PSB-2526-0001",value:u.registration_number,onChange:t=>h("registration_number",t.target.value),className:"w-full rounded-lg border border-gray-300 px-4 py-2.5 text-sm focus:border-emerald-500 focus:ring-emerald-500"}),o.registration_number&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:o.registration_number})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nik",className:"mb-1.5 block text-sm font-semibold text-gray-700",children:"NIK (Nomor Induk Kependudukan)"}),e.jsx("input",{id:"nik",type:"text",placeholder:"16 digit NIK",maxLength:16,value:u.nik,onChange:t=>h("nik",t.target.value),className:"w-full rounded-lg border border-gray-300 px-4 py-2.5 text-sm focus:border-emerald-500 focus:ring-emerald-500"}),o.nik&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:o.nik})]}),i&&l.length===0&&e.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:"Data pendaftaran tidak ditemukan. Pastikan nomor pendaftaran dan NIK benar."}),e.jsx("button",{type:"submit",disabled:g,className:"flex w-full items-center justify-center rounded-lg bg-emerald-600 px-6 py-3 font-bold text-white transition hover:bg-emerald-700 disabled:opacity-50",children:g?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"mr-2 h-5 w-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Memeriksa..."]}):"Cek Status"})]})})]}):e.jsx("div",{className:"space-y-6",children:l.map(t=>{const _=I[t.status]??{label:t.status,color:"bg-gray-100 text-gray-600"};return e.jsxs("div",{className:"overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-lg",children:[e.jsxs("div",{className:"flex flex-col items-start justify-between gap-4 border-b border-gray-100 p-5 sm:flex-row sm:items-center md:p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"mr-4 flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-emerald-100",children:e.jsx("svg",{className:"h-6 w-6 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500",children:t.registration_number})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${_.color}`,children:_.label}),e.jsx("button",{onClick:k,className:"rounded-lg p-2 text-gray-400 transition hover:bg-gray-100 hover:text-red-500",title:"Cari ulang",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]}),e.jsxs("div",{className:"p-5 md:p-6",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsx(w,{label:"Lembaga",value:t.institution.name}),e.jsx(w,{label:"Gelombang",value:t.admission_wave.name}),e.jsx(w,{label:"Tanggal Daftar",value:M(t.created_at)})]}),t.invoices.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"mb-3 text-sm font-semibold text-gray-700",children:"Tagihan Pembayaran"}),e.jsx("div",{className:"space-y-2",children:t.invoices.map(A)})]}),t.documents.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"mb-3 text-sm font-semibold text-gray-700",children:"Dokumen"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.documents.map(D)})]})]})]},t.id)})}),s[9]=l,s[10]=u,s[11]=o,s[12]=k,s[13]=v,s[14]=g,s[15]=i,s[16]=h,s[17]=x):x=s[17];let b;return s[18]!==m||s[19]!==x?(b=e.jsx(P,{title:"Cek Status — PSB Dar Al Tauhid",children:e.jsxs("div",{className:"mx-auto max-w-4xl px-4 py-8 sm:px-6 md:py-12 lg:px-8",children:[m,x]})}),s[18]=m,s[19]=x,s[20]=b):b=s[20],b}function D(r){return e.jsxs("span",{className:`rounded-full px-3 py-1 text-xs font-medium ${r.is_valid===!0?"bg-emerald-100 text-emerald-700":r.is_valid===!1?"bg-red-100 text-red-600":"bg-gray-100 text-gray-600"}`,children:[r.file_type.replace(/_/g," "),r.is_valid===!0&&" ✓",r.is_valid===!1&&" ✗"]},r.id)}function A(r){return e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-gray-100 bg-gray-50 p-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-800",children:r.code}),e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",r.type,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-bold text-gray-900",children:B(r.amount)}),e.jsx("span",{className:`rounded-full px-2 py-0.5 text-[10px] font-semibold ${r.status==="lunas"?"bg-emerald-100 text-emerald-700":"bg-yellow-100 text-yellow-700"}`,children:r.status==="lunas"?"Lunas":"Belum Lunas"})]})]},r.id)}function w(r){const s=C.c(7),{label:l,value:i}=r;let n;s[0]!==l?(n=e.jsx("dt",{className:"text-xs font-medium text-gray-500",children:l}),s[0]=l,s[1]=n):n=s[1];let a;s[2]!==i?(a=e.jsx("dd",{className:"mt-0.5 text-sm font-semibold text-gray-900",children:i}),s[2]=i,s[3]=a):a=s[3];let d;return s[4]!==n||s[5]!==a?(d=e.jsxs("div",{children:[n,a]}),s[4]=n,s[5]=a,s[6]=d):d=s[6],d}export{F as default};
