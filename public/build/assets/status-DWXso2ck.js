import{j as t,L as C,H as L,e as F}from"./client-DWlEoVOe.js";import{c as S}from"./compiler-runtime-D9Fr3M0Q.js";import{F as T}from"./file-text-Dtt_g5Cn.js";import{A as U}from"./arrow-left-BG7DO0cO.js";import{C as k}from"./circle-check-big-DLH7kXzJ.js";import{C as z}from"./circle-x-DupX5q3k.js";import{C as y}from"./clock-CnJdG0Eq.js";import{U as I}from"./upload-yN9BWSOR.js";import{L as $}from"./loader-circle-C7BeXoJY.js";import"./createLucideIcon-D4AB4V62.js";const D={draft:{label:"Draft",color:"bg-gray-100 text-gray-600",icon:y},diajukan:{label:"Diajukan",color:"bg-blue-100 text-blue-700",icon:y},diverifikasi:{label:"Diverifikasi",color:"bg-indigo-100 text-indigo-700",icon:k},jadwal_tes_ada:{label:"Jadwal Tes",color:"bg-yellow-100 text-yellow-700",icon:y},lulus:{label:"Lulus",color:"bg-green-100 text-green-700",icon:k},tidak_lulus:{label:"Tidak Lulus",color:"bg-red-100 text-red-600",icon:z},diterima:{label:"Diterima",color:"bg-emerald-100 text-emerald-700",icon:k}};function A(a){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a)}function P(a){const e=S.c(37),{invoice:s}=a;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i={proof:null},e[0]=i):i=e[0];const{data:r,setData:l,post:n,processing:b}=F(i);let h;e[1]!==r.proof||e[2]!==s.id||e[3]!==n?(h=()=>{r.proof&&n(`/invoices/${s.id}/upload-proof`,{forceFormData:!0})},e[1]=r.proof,e[2]=s.id,e[3]=n,e[4]=h):h=e[4];const N=h;let o;e[5]!==s.code?(o=t.jsx("span",{className:"text-xs text-gray-400",children:s.code}),e[5]=s.code,e[6]=o):o=e[6];const v=s.type==="biaya_formulir"?"Biaya Formulir":"Biaya Daftar Ulang";let d;e[7]!==v?(d=t.jsx("p",{className:"text-sm font-bold text-gray-800",children:v}),e[7]=v,e[8]=d):d=e[8];let m;e[9]!==o||e[10]!==d?(m=t.jsxs("div",{children:[o,d]}),e[9]=o,e[10]=d,e[11]=m):m=e[11];const _=`text-xs font-bold px-3 py-1 rounded-full ${s.status==="lunas"?"bg-green-100 text-green-700":s.status==="dibatalkan"?"bg-red-100 text-red-600":"bg-yellow-100 text-yellow-700"}`,w=s.status==="lunas"?"Lunas":s.status==="dibatalkan"?"Dibatalkan":"Belum Lunas";let c;e[12]!==_||e[13]!==w?(c=t.jsx("span",{className:_,children:w}),e[12]=_,e[13]=w,e[14]=c):c=e[14];let x;e[15]!==m||e[16]!==c?(x=t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m,c]}),e[15]=m,e[16]=c,e[17]=x):x=e[17];let f;e[18]!==s.amount?(f=A(s.amount),e[18]=s.amount,e[19]=f):f=e[19];let u;e[20]!==f?(u=t.jsx("p",{className:"text-lg font-bold text-emerald-700 mb-3",children:f}),e[20]=f,e[21]=u):u=e[21];let p;e[22]!==r.proof||e[23]!==N||e[24]!==s.proof_path||e[25]!==s.status||e[26]!==b||e[27]!==l?(p=s.status==="belum_lunas"&&!s.proof_path&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-2 text-sm text-emerald-600 bg-emerald-50 px-4 py-2 rounded-lg hover:bg-emerald-100 font-medium",children:[t.jsx(I,{size:14}),"Upload Bukti Transfer",t.jsx("input",{type:"file",className:"hidden",accept:".jpg,.jpeg,.png,.pdf",onChange:B=>l("proof",B.target.files?.[0]||null)})]}),r.proof&&t.jsx("button",{onClick:N,disabled:b,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-medium disabled:opacity-50",children:b?t.jsx($,{size:14,className:"animate-spin"}):"Kirim"})]}),e[22]=r.proof,e[23]=N,e[24]=s.proof_path,e[25]=s.status,e[26]=b,e[27]=l,e[28]=p):p=e[28];let g;e[29]!==s.proof_path||e[30]!==s.status?(g=s.proof_path&&s.status!=="lunas"&&t.jsxs("p",{className:"text-xs text-blue-600 flex items-center gap-1",children:[t.jsx(y,{size:12})," Bukti transfer menunggu verifikasi admin"]}),e[29]=s.proof_path,e[30]=s.status,e[31]=g):g=e[31];let j;return e[32]!==x||e[33]!==u||e[34]!==p||e[35]!==g?(j=t.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl border border-gray-200",children:[x,u,p,g]}),e[32]=x,e[33]=u,e[34]=p,e[35]=g,e[36]=j):j=e[36],j}function Y(a){const e=S.c(6),{candidates:s}=a;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=t.jsx(L,{title:"Status Pendaftaran"}),e[0]=i):i=e[0];let r;e[1]===Symbol.for("react.memo_cache_sentinel")?(r=t.jsx("div",{className:"bg-white border-b border-gray-100 shadow-sm",children:t.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-4 flex items-center justify-between",children:[t.jsxs(C,{href:"/",className:"flex items-center gap-2 text-gray-600 hover:text-emerald-700 text-sm font-medium",children:[t.jsx(U,{size:16}),"Beranda PSB"]}),t.jsx("h1",{className:"font-bold text-emerald-800",children:"Status Pendaftaran"})]})}),e[1]=r):r=e[1];let l;e[2]!==s?(l=s.length===0?t.jsxs("div",{className:"text-center py-20 bg-white rounded-2xl border border-gray-100",children:[t.jsx(T,{className:"mx-auto text-gray-300 mb-4",size:48}),t.jsx("p",{className:"text-gray-500 font-medium",children:"Belum ada pendaftaran."}),t.jsx(C,{href:"/",className:"text-emerald-600 text-sm font-medium hover:underline mt-2 inline-block",children:"Daftar Sekarang"})]}):s.map(R),e[2]=s,e[3]=l):l=e[3];let n;return e[4]!==l?(n=t.jsxs(t.Fragment,{children:[i,t.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-50 to-white font-sans",children:[r,t.jsx("div",{className:"max-w-3xl mx-auto px-6 py-8 space-y-6",children:l})]})]}),e[4]=l,e[5]=n):n=e[5],n}function R(a){const e=D[a.status]||D.draft,s=e.icon;return t.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[t.jsx("div",{className:"p-6 border-b border-gray-50",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-gray-400 font-mono",children:a.registration_number}),t.jsx("h2",{className:"font-bold text-gray-800 text-lg mt-1",children:a.name}),t.jsxs("p",{className:"text-sm text-gray-500",children:[a.institution.name," — ",a.admission_wave.name]})]}),t.jsxs("span",{className:`inline-flex items-center gap-1.5 text-xs font-bold px-3 py-1.5 rounded-full ${e.color}`,children:[t.jsx(s,{size:14}),e.label]})]})}),a.documents.length>0&&t.jsxs("div",{className:"px-6 py-4 border-b border-gray-50",children:[t.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-3",children:"Berkas"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:a.documents.map(H)})]}),a.invoices.length>0&&t.jsxs("div",{className:"px-6 py-4 space-y-3",children:[t.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-3",children:"Tagihan"}),a.invoices.map(E)]})]},a.id)}function E(a){return t.jsx(P,{invoice:a},a.id)}function H(a){return t.jsxs("span",{className:`text-xs px-3 py-1 rounded-full font-medium ${a.is_valid===!0?"bg-green-100 text-green-700":a.is_valid===!1?"bg-red-100 text-red-600":"bg-gray-100 text-gray-500"}`,children:[a.file_type.toUpperCase()," ",a.is_valid===!0?"✓":a.is_valid===!1?"✗":"⏳"]},a.id)}export{Y as default};
